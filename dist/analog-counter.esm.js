var t=function(){function t(t,i,s,h){this.originX=0,this.originY=0,this.scene=t,this.x=i,this.y=s;var e=h||{};this.backgroundColor=null!=e.backgroundColor?h.backgroundColor:16777215,this.fontColor=null!=e.fontColor?h.fontColor:"#000000",this.fontSize=e.fontSize||24,this.padding=e.padding||Math.round(this.fontSize/2),this.digits=e.digits||6,this.height=e.height||2*this.fontSize,this.height>2*this.fontSize&&(this.height=2*this.fontSize),this.width=e.width||this.digits*(this.fontSize+4),this.shade=null!=e.shade?e.shade:.9,this.duration=null!=e.duration?e.duration:1e3,this.oX=this.x-this.originX*this.width,this.oY=this.y-this.originY*this.height,this.init()}var i=t.prototype;return i.getBackground=function(){var t=this.scene.add.graphics();return t.lineStyle(1,0,.9),t.fillStyle(this.backgroundColor,1),t.fillRect(0,0,this.renderTextureWidth,this.renderTextureHeight),t.strokeRect(0,0,this.renderTextureWidth,this.renderTextureHeight),t},i.init=function(){this.gap=Math.ceil(this.padding+this.fontSize/2),this.renderTextureWidth=Math.ceil(this.width/this.digits),this.renderTextureHeight=this.height/2+10*this.gap,this.initMask(),this.initDigitsArray(),this.shade&&this.makeShade(this.shade)},i.initDigitsArray=function(){this.digitsArray=[];for(var t=this.getBackground(),i={fontFamily:"Arial",fontSize:this.fontSize,fontStyle:"bold",color:this.fontColor},s=0;s<this.digits;s++){var h=this.scene.add.renderTexture(this.oX+s*this.renderTextureWidth,this.oY,this.renderTextureWidth,this.renderTextureHeight).setOrigin(0);h.draw(t,0,0);var e=this.scene.add.text(0,0,"9",i).setOrigin(.5,.5);h.draw(e,this.renderTextureWidth/2,this.height/2-this.gap),e.destroy();for(var r=0;r<10;r++){var n=this.scene.add.text(0,0,r.toString(),i).setOrigin(.5,.5);h.draw(n,this.renderTextureWidth/2,this.height/2+r*this.gap),n.destroy()}var a=this.scene.add.text(0,0,"0",i).setOrigin(.5,.5);h.draw(a,this.renderTextureWidth/2,this.renderTextureHeight),a.destroy(),h.setMask(this.mask),this.digitsArray[s]=h}t.destroy()},i.initMask=function(){this.maskShape=this.scene.make.graphics({}).fillStyle(16777215).fillRect(this.oX,this.y,this.width,this.height),this.mask=this.maskShape.createGeometryMask()},i.makeShade=function(t){this.shadeOverlay=this.scene.add.renderTexture(this.oX,this.y,this.width,this.height);var i=this.scene.make.renderTexture({width:this.width,height:this.height/2}).setOrigin(0),s=this.scene.make.graphics({});s.fillStyle(0,t),s.fillRect(0,0,this.width,this.height/2),i.draw(s,0,0),i.setAlpha(1,1,0,0),this.shadeOverlay.draw(i,0,0),i.setAlpha(0,0,1,1),this.shadeOverlay.draw(i,0,this.height/2),i.destroy(),s.destroy()},i.setNumber=function(t){var i=this,s=this.duration,h=t.toString(),e=(h=h.padStart(this.digits,"0")).split(""),r=this.oY;e.forEach(function(t,h){var e=parseInt(t);if(i.digitsArray[h].y!=-e*i.gap)var n=i.scene.tweens.add({targets:i.digitsArray[h],y:r-e*i.gap,duration:s,ease:"Power2",onComplete:function(){n.stop()}})})},i.setOrigin=function(t,i){null==i?(this.originX=t,this.originY=t):(this.originX=t,this.originY=i),this.setPosition(this.x,this.y)},i.setPosition=function(t,i){var s=0,h=0;if(null!=t){var e=t-this.originX*this.width;s=e-this.oX,this.x=t,this.oX=e}if(null!=i){var r=i-this.originY*this.height;h=r-this.oY,this.y=i,this.oY=r}this.digitsArray.forEach(function(t){t.x+=s,t.y+=h}),this.shade&&this.shadeOverlay.setPosition(this.oX,this.oY),this.mask.geometryMask.x+=s,this.mask.geometryMask.y+=h},t}();export default t;
